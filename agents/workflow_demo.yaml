name: workflow_demo
title_ua: Демонстраційний воркфлоу
description_ua: Класифікація задачі та відповідна відповідь у різних lane
kind: composite
inputs:
- name: task_text
- name: stop_agent_execution
  type: bool
  default: false
locals:
- name: stop_branch_value
  value: true
- name: ollama_host
  value: http://127.0.0.1:11434
- name: model
  value: qwen3:32b
- name: temperature
  value: 0.2
outputs:
- name: класифікація
- name: відповідь
- name: вихідний_запит
- name: обрати_план
- name: гілка_так
- name: гілка_ні
graph:
  lanes:
  - items:
    - id: classify
      agent: task_classifier
      bindings:
      - from_agent_item_id: __CTX__
        from_var: task_text
        to_agent_item_id: classify
        to_var: task_text
      ui:
        lane_index: 0
        order: 0
  - items:
    - id: branch
      agent: branch_condition
      bindings:
      - from_agent_item_id: __CTX__
        from_var: класифікація
        to_agent_item_id: branch
        to_var: умова
      - from_agent_item_id: __CTX__
        from_var: task_text
        to_agent_item_id: branch
        to_var: значення
      ui:
        lane_index: 1
        order: 0
    - id: branch_stop
      agent: branch_condition
      bindings:
      - from_agent_item_id: __CTX__
        from_var: класифікація
        to_agent_item_id: branch_stop
        to_var: умова
      - from_agent_item_id: __CTX__
        from_var: stop_branch_value
        to_agent_item_id: branch_stop
        to_var: значення
      ui:
        lane_index: 1
        order: 1
    - id: echo_simple
      agent: echo_simple
      bindings:
      - from_agent_item_id: __CTX__
        from_var: гілка_ні
        to_agent_item_id: echo_simple
        to_var: task_text
      - from_agent_item_id: branch_stop
        from_var: істина
        to_agent_item_id: echo_simple
        to_var: stop_agent_execution
      ui:
        lane_index: 1
        order: 2
    - id: echo_plan
      agent: echo_plan
      bindings:
      - from_agent_item_id: __CTX__
        from_var: гілка_так
        to_agent_item_id: echo_plan
        to_var: task_text
      - from_agent_item_id: branch_stop
        from_var: хиба
        to_agent_item_id: echo_plan
        to_var: stop_agent_execution
      ui:
        lane_index: 1
        order: 3
  __ctx_bindings:
  - from_agent_item_id: classify
    from_var: is_complex
    to_agent_item_id: __CTX__
    to_var: класифікація
  - from_agent_item_id: classify
    from_var: is_complex
    to_agent_item_id: __CTX__
    to_var: обрати_план
  - from_agent_item_id: classify
    from_var: original_task
    to_agent_item_id: __CTX__
    to_var: вихідний_запит
  - from_agent_item_id: branch
    from_var: істина
    to_agent_item_id: __CTX__
    to_var: гілка_так
  - from_agent_item_id: branch
    from_var: хиба
    to_agent_item_id: __CTX__
    to_var: гілка_ні
  - from_agent_item_id: echo_simple
    from_var: text
    to_agent_item_id: __CTX__
    to_var: відповідь
  - from_agent_item_id: echo_plan
    from_var: text
    to_agent_item_id: __CTX__
    to_var: відповідь
