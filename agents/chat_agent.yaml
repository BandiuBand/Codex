name: chat_agent
title_ua: Місток із користувачем
description_ua: Надсилає текст користувачу та повертає його відповідь
kind: atomic
executor: python
inputs:
  - name: message_to_user
  - name: needs_response
locals:
  - name: user_message
    value: ""
  - name: code
    value: |
      from agentfw.runtime.engine import BlockedExecution

      text = message_to_user or ""
      wants_reply = True if needs_response is None else bool(needs_response)

      if wants_reply and not user_message:
          raise BlockedExecution(
              missing_inputs=["user_message"],
              questions_to_user=[text] if text else None,
              why_blocked=text or "Очікуємо відповідь користувача",
          )

      user_message = user_message or ""
outputs:
  - name: user_message
