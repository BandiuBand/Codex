name: classification_consolidator
title_ua: Узгодження класифікації задачі
description_ua: Поєднує результат LLM та просту евристику, щоб гарантувати прапор складності
kind: atomic
executor: python
inputs:
  - name: task_text
  - name: llm_flag
  - name: llm_reason
locals:
  - name: code
    value: |
      text = str(task_text)
      flag = llm_flag
      if flag is None:
          flag = len(text) > 30
      try:
          is_complex = bool(flag)
      except Exception:  # noqa: BLE001
          is_complex = False
      класифікація = llm_reason if llm_reason is not None else ("heurstic fallback" if is_complex else "просте завдання")
      обрати_план = is_complex
      original_task = text
outputs:
  - name: is_complex
  - name: класифікація
  - name: обрати_план
  - name: original_task
