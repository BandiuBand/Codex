name: classification_consolidator
title_ua: Узгодження класифікації задачі
description_ua: Поєднує результат LLM та просту евристику, щоб гарантувати прапор
  складності
kind: atomic
inputs:
- name: task_text
- name: llm_flag
- name: llm_reason
- name: stop_agent_execution
  type: bool
  default: false
locals:
- name: code
  value: "text = str(task_text)\nflag = llm_flag\nif flag is None:\n    flag = len(text)\
    \ > 30\ntry:\n    is_complex = bool(flag)\nexcept Exception:  # noqa: BLE001\n\
    \    is_complex = False\nкласифікація = llm_reason if llm_reason is not None else\
    \ (\"heurstic fallback\" if is_complex else \"просте завдання\")\nобрати_план\
    \ = is_complex\noriginal_task = text\n"
outputs:
- name: is_complex
- name: класифікація
- name: обрати_план
- name: original_task
executor: python
