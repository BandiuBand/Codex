# План виправлень для узгодження з CONCEPT_LOCK (тільки змістовні кроки, без змін коду в цій ітерації)

1. **agentfw/web/static/index.html** — перебудувати структуру DOM так, щоб канва сама відображала змінні поточного агента по краях (inputs зліва, locals зверху, outputs справа) без будь-яких додаткових панелей. Додати елементи для створення/видалення цих змінних прямо на канві. Межі: правки лише у цьому файлі, тільки розмітка.

2. **agentfw/web/static/styles.css** — стилізувати крайові зони змінних, картки агентів і лінії зв’язків, забезпечити розміщення портів відповідно до концепції (inputs ліворуч, locals зверху, outputs праворуч), не змінюючи логіку. Межі: тільки стилі цього файлу.

3. **agentfw/web/static/app.js** — забезпечити повний функціонал: а) CRUD змінних поточного агента на канві; б) відображення портів дочірніх агентів (inputs/locals/outputs) без втрат; в) drag&drop з’єднання між портами поточного агента та портами дочірніх (включно з контекстними виходами назад у контекст); г) коректний ререндер після змін. Межі: лише JS цього файлу.

4. **agentfw/runtime/engine.py** — узгодити виконання з новою моделлю bindings: зчитування прив’язок від контексту до дочірніх агентів і від дочірніх агентів назад у контекст, щоб результати з портів дочірніх агентів зберігалися у змінних поточного агента. Межі: тільки логіка цього файлу.

5. **agents/workflow_demo.yaml** — оновити демо під нову схему: чіткі inputs/locals/outputs агента, явні bindings на крайові порти, використання атомарного агента розгалуження. Межі: тільки цей YAML.

6. **tests/** — додати/оновити тести, що перевіряють: а) наявність портів змінних поточного агента на краях канви; б) drag-з’єднання контекст→input дочірнього та output дочірнього→контекст; в) працездатність demo workflow через API. Межі: лише тестові файли.

7. **Ручна перевірка UI** — запустити веб-редактор, перевірити створення/редагування/збереження агента з крайовими портами, drag&drop ліній між портами, відсутність додаткових панелей, українська локалізація. Межі: тільки мануальна перевірка; якщо щось не працює — повертатися до кроків 1–3 і виправляти до повної відповідності.
